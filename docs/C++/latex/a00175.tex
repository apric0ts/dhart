\hypertarget{a00175}{}\doxysection{HF\+::Ray\+Tracer Namespace Reference}
\label{a00175}\index{HF::RayTracer@{HF::RayTracer}}
\doxysubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
class \mbox{\hyperlink{a01061}{Embree\+Ray\+Tracer}}
\begin{DoxyCompactList}\small\item\em A wrapper for Intel\textquotesingle{}s Embree Library. \end{DoxyCompactList}\item 
struct \mbox{\hyperlink{a01065}{Full\+Ray\+Request}}
\item 
struct \mbox{\hyperlink{a00175_a01069}{Hit\+Info}}
\begin{DoxyCompactList}\small\item\em Contains no information about the ray itself,  \mbox{\hyperlink{a00175_a01069}{More...}}\end{DoxyCompactList}\item 
struct \mbox{\hyperlink{a01057}{Hit\+Struct}}
\begin{DoxyCompactList}\small\item\em A simple hit struct to carry all relevant information about hits. \end{DoxyCompactList}\item 
class \mbox{\hyperlink{a01077}{Ray\+Request\+Collection}}
\begin{DoxyCompactList}\small\item\em Holds a set of ray requests, reusing memory where possible \end{DoxyCompactList}\item 
struct \mbox{\hyperlink{a01073}{Ray\+Request\+Lite}}
\begin{DoxyCompactList}\small\item\em A ray request, that depends on Ray\+Request\+Lite\+Holder \end{DoxyCompactList}\item 
struct \mbox{\hyperlink{a00175_a01053}{Triangle}}
\begin{DoxyCompactList}\small\item\em A triangle. Used internally in Embree.  \mbox{\hyperlink{a00175_a01053}{More...}}\end{DoxyCompactList}\item 
struct \mbox{\hyperlink{a00175_a01049}{Vertex}}
\begin{DoxyCompactList}\small\item\em A vertex. Used internally in Embree.  \mbox{\hyperlink{a00175_a01049}{More...}}\end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
{\footnotesize template$<$typename P , typename D $>$ }\\P \mbox{\hyperlink{a00175_ad36c0e67c4b26522c82d29a2f4c2e7e7}{Calculate\+Hit\+Point}} (const P \&origin, const D \&direction, float distance)
\begin{DoxyCompactList}\small\item\em Calculate the hitpoint of a ray from its origin, direction and distance \end{DoxyCompactList}\item 
void \mbox{\hyperlink{a00175_a9c9d1d9869aee1f51b5de11f7d9420ec}{Check\+State}} (R\+T\+C\+Device \&device)
\begin{DoxyCompactList}\small\item\em Check an embree device for errors. \end{DoxyCompactList}\item 
static double \mbox{\hyperlink{a00175_adb85d3abbe51075a71812fdc95de8322}{get\+Random\+Number}} ()
\item 
static float \mbox{\hyperlink{a00175_a0429e7d02ef59bcad3fa5f7ec2b620dc}{myradians}} (float angle)
\item 
static unsigned long \mbox{\hyperlink{a00175_af350b924e9637d84c8b316a3b1641bbc}{mix}} (unsigned long a, unsigned long b, unsigned long c)
\item 
static std\+::vector$<$ std\+::array$<$ float, 3 $>$ $>$ \mbox{\hyperlink{a00175_a03d93804b73bd4a5d8ab8e679e5b28cd}{gen\+Sphere\+Rays}} (int step)
\begin{DoxyCompactList}\small\item\em Generate a vector of directions to distribute rays in 360 degrees. \end{DoxyCompactList}\item 
std\+::vector$<$ std\+::array$<$ float, 3 $>$ $>$ \mbox{\hyperlink{a00175_a6df9ff0fb8610752d548354b3e6600e0}{gen\+Fibbonacci\+Rays}} (int numrays)
\begin{DoxyCompactList}\small\item\em Generate a set of equally distributed directions in sphere. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{a00175_a9a8051c9b70fc0ae60337d4a38bf5f57}{vectors\+To\+Buffers}} (const std\+::vector$<$ std\+::array$<$ float, 3 $>$$>$ \&vertices, std\+::vector$<$ \mbox{\hyperlink{a00175_a01053}{Triangle}} $>$ \&Tribuffer, std\+::vector$<$ \mbox{\hyperlink{a00175_a01049}{Vertex}} $>$ \&Vbuffer)
\begin{DoxyCompactList}\small\item\em Index a list of verticies and place them into a triangle and vertex buffer. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{a00175_aac8c0b245ea813969c50b6496cc67945}{buffers\+To\+Structs}} (std\+::vector$<$ float $>$ \&in\+\_\+vertices, std\+::vector$<$ int $>$ \&in\+\_\+indices, std\+::vector$<$ \mbox{\hyperlink{a00175_a01049}{Vertex}} $>$ \&out\+\_\+vertices, std\+::vector$<$ \mbox{\hyperlink{a00175_a01053}{Triangle}} $>$ \&out\+\_\+triangles)
\begin{DoxyCompactList}\small\item\em Package raw arrays of floats and indices in buffers to the required Embree types. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{a00175_a3f55b13b0c41f777baed8813d2fb0c18}{Fire8\+Rays}} (std\+::vector$<$ std\+::reference\+\_\+wrapper$<$ \mbox{\hyperlink{a01065}{Full\+Ray\+Request}} $>$$>$ \&requests, const R\+T\+C\+Scene \&scene, R\+T\+C\+Intersect\+Context \&context)
\begin{DoxyCompactList}\small\item\em Fire 8 rays and update the requests based on results \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Class Documentation}
\index{HF::RayTracer::HitInfo@{HF::RayTracer::HitInfo}}\label{a01069}
\Hypertarget{a00175_a01069}
\doxysubsubsection{struct HF\+::Ray\+Tracer\+::Hit\+Info}
Contains no information about the ray itself, 

\begin{DoxyRefDesc}{Deprecated}
\item[\mbox{\hyperlink{a00161__deprecated000016}{Deprecated}}]Never used. Leftover from partially implemented experimental feature. This eventually became the \mbox{\hyperlink{a01117}{Ray\+Result}} struct seen in the C-\/interface. Moving the \mbox{\hyperlink{a01117}{Ray\+Result}} struct to the C interface was far more useful than what could be accomplished here, since it allowed the Cinterface and its clients to define their own Ray\+Request structs that could be filled through templates. \end{DoxyRefDesc}


Definition at line 48 of file Ray\+Request.\+h.

\index{HF::RayTracer::Triangle@{HF::RayTracer::Triangle}}\label{a01053}
\Hypertarget{a00175_a01053}
\doxysubsubsection{struct HF\+::Ray\+Tracer\+::Triangle}
A triangle. Used internally in Embree. 



Definition at line 50 of file embree\+\_\+raytracer.\+cpp.

\begin{DoxyFields}{Class Members}
\mbox{\Hypertarget{a00175_a504a02b108984ddfa3f521cf40b17e61}\label{a00175_a504a02b108984ddfa3f521cf40b17e61}} 
int&
v0&
\\
\hline

\mbox{\Hypertarget{a00175_afc086ccfe3fc951af959d905056358c4}\label{a00175_afc086ccfe3fc951af959d905056358c4}} 
int&
v1&
\\
\hline

\mbox{\Hypertarget{a00175_ab7bfa105fb125dfc9e31ecf8cbf0f9fa}\label{a00175_ab7bfa105fb125dfc9e31ecf8cbf0f9fa}} 
int&
v2&
\\
\hline

\end{DoxyFields}
\index{HF::RayTracer::Vertex@{HF::RayTracer::Vertex}}\label{a01049}
\Hypertarget{a00175_a01049}
\doxysubsubsection{struct HF\+::Ray\+Tracer\+::Vertex}
A vertex. Used internally in Embree. 



Definition at line 45 of file embree\+\_\+raytracer.\+cpp.

\begin{DoxyFields}{Class Members}
\mbox{\Hypertarget{a00175_aad8e270f026ac9dd20ee294b2b1a21de}\label{a00175_aad8e270f026ac9dd20ee294b2b1a21de}} 
float&
x&
\\
\hline

\mbox{\Hypertarget{a00175_aa27c7b22316499f43093c2b7768c06ea}\label{a00175_aa27c7b22316499f43093c2b7768c06ea}} 
float&
y&
\\
\hline

\mbox{\Hypertarget{a00175_ab8599cc6220e686dac319622f7d2f364}\label{a00175_ab8599cc6220e686dac319622f7d2f364}} 
float&
z&
\\
\hline

\end{DoxyFields}


\doxysubsection{Function Documentation}
\mbox{\Hypertarget{a00175_aac8c0b245ea813969c50b6496cc67945}\label{a00175_aac8c0b245ea813969c50b6496cc67945}} 
\index{HF::RayTracer@{HF::RayTracer}!buffersToStructs@{buffersToStructs}}
\index{buffersToStructs@{buffersToStructs}!HF::RayTracer@{HF::RayTracer}}
\doxysubsubsection{\texorpdfstring{buffersToStructs()}{buffersToStructs()}}
{\footnotesize\ttfamily void H\+F\+::\+Ray\+Tracer\+::buffers\+To\+Structs (\begin{DoxyParamCaption}\item[{std\+::vector$<$ float $>$ \&}]{in\+\_\+vertices,  }\item[{std\+::vector$<$ int $>$ \&}]{in\+\_\+indices,  }\item[{std\+::vector$<$ \mbox{\hyperlink{a00175_a01049}{Vertex}} $>$ \&}]{out\+\_\+vertices,  }\item[{std\+::vector$<$ \mbox{\hyperlink{a00175_a01053}{Triangle}} $>$ \&}]{out\+\_\+triangles }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Package raw arrays of floats and indices in buffers to the required Embree types. 


\begin{DoxyParams}{Parameters}
{\em in\+\_\+vertices} & An array of floats in which every 3 floats represents a vertex. \\
\hline
{\em in\+\_\+indices} & An array of integers in which every 3 integers represents a triangle. \\
\hline
{\em out\+\_\+vertices} & Output array for vertexes.\\
\hline
{\em out\+\_\+triangles} & Output array for triangles.\\
\hline
\end{DoxyParams}
\begin{DoxyRefDesc}{Todo}
\item[\mbox{\hyperlink{a00162__todo000007}{Todo}}]May be faster as a std\+::move or std\+::copy. \end{DoxyRefDesc}


Definition at line 196 of file embree\+\_\+raytracer.\+cpp.

\mbox{\Hypertarget{a00175_ad36c0e67c4b26522c82d29a2f4c2e7e7}\label{a00175_ad36c0e67c4b26522c82d29a2f4c2e7e7}} 
\index{HF::RayTracer@{HF::RayTracer}!CalculateHitPoint@{CalculateHitPoint}}
\index{CalculateHitPoint@{CalculateHitPoint}!HF::RayTracer@{HF::RayTracer}}
\doxysubsubsection{\texorpdfstring{CalculateHitPoint()}{CalculateHitPoint()}}
{\footnotesize\ttfamily template$<$typename P , typename D $>$ \\
P H\+F\+::\+Ray\+Tracer\+::\+Calculate\+Hit\+Point (\begin{DoxyParamCaption}\item[{const P \&}]{origin,  }\item[{const D \&}]{direction,  }\item[{float}]{distance }\end{DoxyParamCaption})}



Calculate the hitpoint of a ray from its origin, direction and distance 

\begin{DoxyRefDesc}{Deprecated}
\item[\mbox{\hyperlink{a00161__deprecated000006}{Deprecated}}]Unused. \end{DoxyRefDesc}


Definition at line 22 of file embree\+\_\+raytracer.\+cpp.

\mbox{\Hypertarget{a00175_a9c9d1d9869aee1f51b5de11f7d9420ec}\label{a00175_a9c9d1d9869aee1f51b5de11f7d9420ec}} 
\index{HF::RayTracer@{HF::RayTracer}!CheckState@{CheckState}}
\index{CheckState@{CheckState}!HF::RayTracer@{HF::RayTracer}}
\doxysubsubsection{\texorpdfstring{CheckState()}{CheckState()}}
{\footnotesize\ttfamily void H\+F\+::\+Ray\+Tracer\+::\+Check\+State (\begin{DoxyParamCaption}\item[{R\+T\+C\+Device \&}]{device }\end{DoxyParamCaption})}



Check an embree device for errors. 


\begin{DoxyParams}{Parameters}
{\em device} & Device to check for errors\\
\hline
\end{DoxyParams}

\begin{DoxyExceptions}{Exceptions}
{\em std\+::exception} & Some error is found while casting rays.\\
\hline
\end{DoxyExceptions}


Definition at line 36 of file embree\+\_\+raytracer.\+cpp.



Referenced by H\+F\+::\+Ray\+Tracer\+::\+Embree\+Ray\+Tracer\+::\+Fire\+Ray().

\mbox{\Hypertarget{a00175_a3f55b13b0c41f777baed8813d2fb0c18}\label{a00175_a3f55b13b0c41f777baed8813d2fb0c18}} 
\index{HF::RayTracer@{HF::RayTracer}!Fire8Rays@{Fire8Rays}}
\index{Fire8Rays@{Fire8Rays}!HF::RayTracer@{HF::RayTracer}}
\doxysubsubsection{\texorpdfstring{Fire8Rays()}{Fire8Rays()}}
{\footnotesize\ttfamily void H\+F\+::\+Ray\+Tracer\+::\+Fire8\+Rays (\begin{DoxyParamCaption}\item[{std\+::vector$<$ std\+::reference\+\_\+wrapper$<$ \mbox{\hyperlink{a01065}{Full\+Ray\+Request}} $>$$>$ \&}]{requests,  }\item[{const R\+T\+C\+Scene \&}]{scene,  }\item[{R\+T\+C\+Intersect\+Context \&}]{context }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Fire 8 rays and update the requests based on results 



Definition at line 475 of file embree\+\_\+raytracer.\+cpp.



Referenced by H\+F\+::\+Ray\+Tracer\+::\+Embree\+Ray\+Tracer\+::\+Fire\+Requests().

\mbox{\Hypertarget{a00175_a6df9ff0fb8610752d548354b3e6600e0}\label{a00175_a6df9ff0fb8610752d548354b3e6600e0}} 
\index{HF::RayTracer@{HF::RayTracer}!genFibbonacciRays@{genFibbonacciRays}}
\index{genFibbonacciRays@{genFibbonacciRays}!HF::RayTracer@{HF::RayTracer}}
\doxysubsubsection{\texorpdfstring{genFibbonacciRays()}{genFibbonacciRays()}}
{\footnotesize\ttfamily std\+::vector$<$ std\+::array$<$ float, 3 $>$ $>$ H\+F\+::\+Ray\+Tracer\+::gen\+Fibbonacci\+Rays (\begin{DoxyParamCaption}\item[{int}]{numrays }\end{DoxyParamCaption})}



Generate a set of equally distributed directions in sphere. 

\begin{DoxyRefDesc}{Deprecated}
\item[\mbox{\hyperlink{a00161__deprecated000011}{Deprecated}}]Use the version in view analysis \end{DoxyRefDesc}


The directions from this function are better distributed than those of \mbox{\hyperlink{a00175_a03d93804b73bd4a5d8ab8e679e5b28cd}{gen\+Sphere\+Rays}}. The implementation of this function is based on \href{https://stackoverflow.com/questions/9600801/evenly-distributing-n-points-on-a-sphere}{\texttt{ https\+://stackoverflow.\+com/questions/9600801/evenly-\/distributing-\/n-\/points-\/on-\/a-\/sphere}}. 


\begin{DoxyParams}{Parameters}
{\em numrays} & The number of directions to generate. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
An array of equally spaced directions. 
\end{DoxyReturn}
\begin{DoxyRefDesc}{Deprecated}
\item[\mbox{\hyperlink{a00161__deprecated000013}{Deprecated}}]Use the version in View\+Analysis \end{DoxyRefDesc}


Definition at line 109 of file embree\+\_\+raytracer.\+cpp.



References myradians().

\mbox{\Hypertarget{a00175_a03d93804b73bd4a5d8ab8e679e5b28cd}\label{a00175_a03d93804b73bd4a5d8ab8e679e5b28cd}} 
\index{HF::RayTracer@{HF::RayTracer}!genSphereRays@{genSphereRays}}
\index{genSphereRays@{genSphereRays}!HF::RayTracer@{HF::RayTracer}}
\doxysubsubsection{\texorpdfstring{genSphereRays()}{genSphereRays()}}
{\footnotesize\ttfamily std\+::vector$<$ std\+::array$<$ float, 3 $>$ $>$ H\+F\+::\+Ray\+Tracer\+::gen\+Sphere\+Rays (\begin{DoxyParamCaption}\item[{int}]{step }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [static]}}



Generate a vector of directions to distribute rays in 360 degrees. 

\begin{DoxyRefDesc}{Deprecated}
\item[\mbox{\hyperlink{a00161__deprecated000010}{Deprecated}}]Use the version in View\+Analysis. \end{DoxyRefDesc}


This algorithm is from the old python codebase. 


\begin{DoxyParams}{Parameters}
{\em step} & The stepsize to use for distributing directions. Lower step sizes yield better coverage, but more rays. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
An array of directions distributed in a sphere. 
\end{DoxyReturn}
\begin{DoxyRefDesc}{Deprecated}
\item[\mbox{\hyperlink{a00161__deprecated000012}{Deprecated}}]Use the version in View\+Analysis \end{DoxyRefDesc}


Definition at line 82 of file embree\+\_\+raytracer.\+cpp.



References myradians().

\mbox{\Hypertarget{a00175_adb85d3abbe51075a71812fdc95de8322}\label{a00175_adb85d3abbe51075a71812fdc95de8322}} 
\index{HF::RayTracer@{HF::RayTracer}!getRandomNumber@{getRandomNumber}}
\index{getRandomNumber@{getRandomNumber}!HF::RayTracer@{HF::RayTracer}}
\doxysubsubsection{\texorpdfstring{getRandomNumber()}{getRandomNumber()}}
{\footnotesize\ttfamily static double H\+F\+::\+Ray\+Tracer\+::get\+Random\+Number (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [static]}}

\begin{DoxyRefDesc}{Deprecated}
\item[\mbox{\hyperlink{a00161__deprecated000007}{Deprecated}}]Use the version in View\+Analysis. \end{DoxyRefDesc}


Definition at line 54 of file embree\+\_\+raytracer.\+cpp.

\mbox{\Hypertarget{a00175_af350b924e9637d84c8b316a3b1641bbc}\label{a00175_af350b924e9637d84c8b316a3b1641bbc}} 
\index{HF::RayTracer@{HF::RayTracer}!mix@{mix}}
\index{mix@{mix}!HF::RayTracer@{HF::RayTracer}}
\doxysubsubsection{\texorpdfstring{mix()}{mix()}}
{\footnotesize\ttfamily static unsigned long H\+F\+::\+Ray\+Tracer\+::mix (\begin{DoxyParamCaption}\item[{unsigned long}]{a,  }\item[{unsigned long}]{b,  }\item[{unsigned long}]{c }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [static]}}

\begin{DoxyRefDesc}{Deprecated}
\item[\mbox{\hyperlink{a00161__deprecated000009}{Deprecated}}]Use the version in View\+Analysis. \end{DoxyRefDesc}


Definition at line 66 of file embree\+\_\+raytracer.\+cpp.

\mbox{\Hypertarget{a00175_a0429e7d02ef59bcad3fa5f7ec2b620dc}\label{a00175_a0429e7d02ef59bcad3fa5f7ec2b620dc}} 
\index{HF::RayTracer@{HF::RayTracer}!myradians@{myradians}}
\index{myradians@{myradians}!HF::RayTracer@{HF::RayTracer}}
\doxysubsubsection{\texorpdfstring{myradians()}{myradians()}}
{\footnotesize\ttfamily static float H\+F\+::\+Ray\+Tracer\+::myradians (\begin{DoxyParamCaption}\item[{float}]{angle }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [static]}}

\begin{DoxyRefDesc}{Deprecated}
\item[\mbox{\hyperlink{a00161__deprecated000008}{Deprecated}}]Use the version in View\+Analysis. \end{DoxyRefDesc}


Definition at line 60 of file embree\+\_\+raytracer.\+cpp.



Referenced by gen\+Fibbonacci\+Rays(), and gen\+Sphere\+Rays().

\mbox{\Hypertarget{a00175_a9a8051c9b70fc0ae60337d4a38bf5f57}\label{a00175_a9a8051c9b70fc0ae60337d4a38bf5f57}} 
\index{HF::RayTracer@{HF::RayTracer}!vectorsToBuffers@{vectorsToBuffers}}
\index{vectorsToBuffers@{vectorsToBuffers}!HF::RayTracer@{HF::RayTracer}}
\doxysubsubsection{\texorpdfstring{vectorsToBuffers()}{vectorsToBuffers()}}
{\footnotesize\ttfamily void H\+F\+::\+Ray\+Tracer\+::vectors\+To\+Buffers (\begin{DoxyParamCaption}\item[{const std\+::vector$<$ std\+::array$<$ float, 3 $>$$>$ \&}]{vertices,  }\item[{std\+::vector$<$ \mbox{\hyperlink{a00175_a01053}{Triangle}} $>$ \&}]{Tribuffer,  }\item[{std\+::vector$<$ \mbox{\hyperlink{a00175_a01049}{Vertex}} $>$ \&}]{Vbuffer }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Index a list of verticies and place them into a triangle and vertex buffer. 


\begin{DoxyParams}{Parameters}
{\em vertices} & Mesh vertices.\\
\hline
{\em Tribuffer} & Output triangle buffer.\\
\hline
{\em Vbuffer} & Output \mbox{\hyperlink{a00175_a01049}{Vertex}} Buffer.\\
\hline
\end{DoxyParams}


Internally, this uses a hashmap to create an index map of vertices.

\begin{DoxyRefDesc}{Todo}
\item[\mbox{\hyperlink{a00162__todo000006}{Todo}}]Performance here can be improved by using indexing. \end{DoxyRefDesc}


Definition at line 146 of file embree\+\_\+raytracer.\+cpp.



Referenced by H\+F\+::\+Ray\+Tracer\+::\+Embree\+Ray\+Tracer\+::\+Embree\+Ray\+Tracer(), and H\+F\+::\+Ray\+Tracer\+::\+Embree\+Ray\+Tracer\+::\+Insert\+New\+Mesh().

