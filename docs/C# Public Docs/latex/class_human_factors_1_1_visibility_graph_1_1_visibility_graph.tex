\hypertarget{class_human_factors_1_1_visibility_graph_1_1_visibility_graph}{}\doxysection{Human\+Factors.\+Visibility\+Graph.\+Visibility\+Graph Class Reference}
\label{class_human_factors_1_1_visibility_graph_1_1_visibility_graph}\index{HumanFactors.VisibilityGraph.VisibilityGraph@{HumanFactors.VisibilityGraph.VisibilityGraph}}


Contains all methods for generating Visibility Graphs.  


\doxysubsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
static \mbox{\hyperlink{class_human_factors_1_1_spatial_structures_1_1_graph}{Graph}} \mbox{\hyperlink{class_human_factors_1_1_visibility_graph_1_1_visibility_graph_a6b9e6d59435543aebc5a42beea7e916d}{Generate\+All\+To\+All}} (\mbox{\hyperlink{class_human_factors_1_1_ray_tracing_1_1_embree_b_v_h}{Embree\+B\+VH}} bvh, I\+Enumerable$<$ \mbox{\hyperlink{struct_human_factors_1_1_vector3_d}{Vector3D}} $>$ nodes, float height=1.\+7f, bool directed=true)
\begin{DoxyCompactList}\small\item\em Create a visibility graph from every node to every node in nodes. \end{DoxyCompactList}\item 
static \mbox{\hyperlink{class_human_factors_1_1_spatial_structures_1_1_graph}{Graph}} \mbox{\hyperlink{class_human_factors_1_1_visibility_graph_1_1_visibility_graph_aebd2e16352a8e5a9920dffe809ed911d}{Generate\+Group\+To\+Group}} (\mbox{\hyperlink{class_human_factors_1_1_ray_tracing_1_1_embree_b_v_h}{Embree\+B\+VH}} bvh, I\+Enumerable$<$ \mbox{\hyperlink{struct_human_factors_1_1_vector3_d}{Vector3D}} $>$ group\+\_\+a, I\+Enumerable$<$ \mbox{\hyperlink{struct_human_factors_1_1_vector3_d}{Vector3D}} $>$ group\+\_\+b, float height=1.\+7f)
\begin{DoxyCompactList}\small\item\em Generate a directed visibility graph from nodes in {\ttfamily group\+\_\+a} to the nodes in {\ttfamily group\+\_\+b.} \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Contains all methods for generating Visibility Graphs. 

\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_human_factors_1_1_visibility_graph_1_1_visibility_graph_a6b9e6d59435543aebc5a42beea7e916d}\label{class_human_factors_1_1_visibility_graph_1_1_visibility_graph_a6b9e6d59435543aebc5a42beea7e916d}} 
\index{HumanFactors.VisibilityGraph.VisibilityGraph@{HumanFactors.VisibilityGraph.VisibilityGraph}!GenerateAllToAll@{GenerateAllToAll}}
\index{GenerateAllToAll@{GenerateAllToAll}!HumanFactors.VisibilityGraph.VisibilityGraph@{HumanFactors.VisibilityGraph.VisibilityGraph}}
\doxysubsubsection{\texorpdfstring{GenerateAllToAll()}{GenerateAllToAll()}}
{\footnotesize\ttfamily static \mbox{\hyperlink{class_human_factors_1_1_spatial_structures_1_1_graph}{Graph}} Human\+Factors.\+Visibility\+Graph.\+Visibility\+Graph.\+Generate\+All\+To\+All (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_human_factors_1_1_ray_tracing_1_1_embree_b_v_h}{Embree\+B\+VH}}}]{bvh,  }\item[{I\+Enumerable$<$ \mbox{\hyperlink{struct_human_factors_1_1_vector3_d}{Vector3D}} $>$}]{nodes,  }\item[{float}]{height = {\ttfamily 1.7f},  }\item[{bool}]{directed = {\ttfamily true} }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Create a visibility graph from every node to every node in nodes. 


\begin{DoxyParams}{Parameters}
{\em bvh} & The B\+VH to intersect with. \\
\hline
{\em nodes} & The nodes to use in the visibility graph. \\
\hline
{\em height} & The height to offset each node from the ground. \\
\hline
{\em directed} & if set to true generate a directed graph, otherwise generate an undirected graph.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
A Graph where each node is a node in nodes, and each edge represents a clear line of sight between the parent and child node. Any nodes that clip into geometry when offset by height will not be considered for any edge connections and will always have no outgoing or incoming edges.
\end{DoxyReturn}
\begin{DoxyAttention}{Attention}
When directed is true. Edges between nodes will only be stored in the edges of the node with the lower ID. To store the edge in the edge array of both nodes use false but be warned, it will take longer to execute and take up more memory. Read the following section for more info.
\end{DoxyAttention}
\begin{DoxyParagraph}{Directed vs Undirected }
For the sake of this function, an undirected visibility graph describes a graph where edge is only stored in the graph for the node with the lowest ID. For example, The first node will check for edges from itself to every node in the set, node 2 will check for edges from itself to every other node except for the first node, node 3 will check every node except for the first and second. In contrast, a directed graph will check every node against every other node in the graph regardless of ID. In most cases you will want to use the undirected algorithm, as it only performs n(n+1)/2 operations vs the directed\textquotesingle{}s n$^\wedge$2 operations.
\end{DoxyParagraph}
\begin{DoxyWarning}{Warning}
Graphs output by this function C\+A\+N\+N\+OT be modified.
\end{DoxyWarning}
\begin{DoxySeeAlso}{See also}
\mbox{\hyperlink{class_human_factors_1_1_spatial_structures_1_1_graph_a45a2d5b16092f8389210dc47f722a539}{Spatial\+Structures.\+Graph.\+Aggregate\+Edge\+Costs}} for a way to easily summarize the results of a visibility graph.
\end{DoxySeeAlso}
\begin{DoxyParagraph}{Example}

\end{DoxyParagraph}

\begin{DoxyCodeInclude}{0}
\DoxyCodeLine{            \textcolor{comment}{// Load the example plane and convert it to z-\/up}}
\DoxyCodeLine{            MeshInfo MI = (OBJLoader.LoadOBJ(\textcolor{stringliteral}{"ExampleModels/plane.obj"}, CommonRotations.Yup\_To\_Zup));}
\DoxyCodeLine{}
\DoxyCodeLine{            \textcolor{comment}{// Construct a BVH from this mesh}}
\DoxyCodeLine{            EmbreeBVH bvh = \textcolor{keyword}{new} EmbreeBVH(MI);}
\DoxyCodeLine{}
\DoxyCodeLine{            \textcolor{comment}{// Define all nodes and put them into an array,}}
\DoxyCodeLine{            Vector3D Point1 = \textcolor{keyword}{new} Vector3D(0, 0, 0);}
\DoxyCodeLine{            Vector3D Point2 = \textcolor{keyword}{new} Vector3D(0, 1, 0);}
\DoxyCodeLine{            Vector3D Point3 = \textcolor{keyword}{new} Vector3D(1, 0, 0);}
\DoxyCodeLine{            Vector3D Point4 = \textcolor{keyword}{new} Vector3D(1, 0, -\/4); \textcolor{comment}{// Node 4 is beneath the plane so it should have no connections}}
\DoxyCodeLine{            Vector3D[] nodes = \{ Point1, Point2, Point3, Point4 \};}
\end{DoxyCodeInclude}

\begin{DoxyCodeInclude}{0}
\DoxyCodeLine{            }
\DoxyCodeLine{            \textcolor{comment}{// Create a visibility from every node to every other node}}
\DoxyCodeLine{            Graph G = \mbox{\hyperlink{namespace_human_factors}{HumanFactors}}.\mbox{\hyperlink{namespace_human_factors_1_1_visibility_graph}{VisibilityGraph}}.\mbox{\hyperlink{class_human_factors_1_1_visibility_graph_1_1_visibility_graph}{VisibilityGraph}}.\mbox{\hyperlink{class_human_factors_1_1_visibility_graph_1_1_visibility_graph_a6b9e6d59435543aebc5a42beea7e916d}{GenerateAllToAll}}(bvh, nodes);}
\DoxyCodeLine{}
\DoxyCodeLine{            \textcolor{comment}{// Aggregate the graph's edges to get the total distance from this node to all of its edges}}
\DoxyCodeLine{            var results = G.AggregateEdgeCosts(\mbox{\hyperlink{namespace_human_factors_1_1_spatial_structures_abd405fa41da0f9a771d547aa47b6e1a0}{GraphEdgeAggregation}}.SUM);}
\DoxyCodeLine{}
\DoxyCodeLine{            \textcolor{comment}{// Print output}}
\DoxyCodeLine{            Debug.WriteLine(results);}
\DoxyCodeLine{}
\end{DoxyCodeInclude}
{\ttfamily \mbox{[}2, 2.\+414214, 2.\+414214, 0\mbox{]}} \mbox{\Hypertarget{class_human_factors_1_1_visibility_graph_1_1_visibility_graph_aebd2e16352a8e5a9920dffe809ed911d}\label{class_human_factors_1_1_visibility_graph_1_1_visibility_graph_aebd2e16352a8e5a9920dffe809ed911d}} 
\index{HumanFactors.VisibilityGraph.VisibilityGraph@{HumanFactors.VisibilityGraph.VisibilityGraph}!GenerateGroupToGroup@{GenerateGroupToGroup}}
\index{GenerateGroupToGroup@{GenerateGroupToGroup}!HumanFactors.VisibilityGraph.VisibilityGraph@{HumanFactors.VisibilityGraph.VisibilityGraph}}
\doxysubsubsection{\texorpdfstring{GenerateGroupToGroup()}{GenerateGroupToGroup()}}
{\footnotesize\ttfamily static \mbox{\hyperlink{class_human_factors_1_1_spatial_structures_1_1_graph}{Graph}} Human\+Factors.\+Visibility\+Graph.\+Visibility\+Graph.\+Generate\+Group\+To\+Group (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_human_factors_1_1_ray_tracing_1_1_embree_b_v_h}{Embree\+B\+VH}}}]{bvh,  }\item[{I\+Enumerable$<$ \mbox{\hyperlink{struct_human_factors_1_1_vector3_d}{Vector3D}} $>$}]{group\+\_\+a,  }\item[{I\+Enumerable$<$ \mbox{\hyperlink{struct_human_factors_1_1_vector3_d}{Vector3D}} $>$}]{group\+\_\+b,  }\item[{float}]{height = {\ttfamily 1.7f} }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Generate a directed visibility graph from nodes in {\ttfamily group\+\_\+a} to the nodes in {\ttfamily group\+\_\+b.} 


\begin{DoxyParams}{Parameters}
{\em bvh} & The geometry to use for generating the visibility graph. \\
\hline
{\em group\+\_\+a} & The nodes to cast rays from. \\
\hline
{\em group\+\_\+b} & The nodes to cast rays to. \\
\hline
{\em height} & The height to offset nodes from the ground.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
A graph contanining the visibility graph. Since a new graph is created, all nodes will be assigned ids for access within it. First every node in group\+\_\+a will be assigned ids in order, then all nodes in {\ttfamily group\+\_\+b} will be assigned ids in order. Nodes in {\ttfamily group\+\_\+a} will be assigned I\+Ds before those in {\ttfamily group\+\_\+b}. All edges will be from nodes in {\ttfamily group\+\_\+a} to nodes in {\ttfamily group\+\_\+b}. Any nodes that clip into geometry when offset by height will not be considered for any edge connections and will always have no outgoing or incoming edges.
\end{DoxyReturn}
\begin{DoxyPrecond}{Precondition}
No nodes in {\ttfamily group\+\_\+a} also exist in {\ttfamily group\+\_\+b} and vice versa.
\end{DoxyPrecond}
\begin{DoxyAttention}{Attention}
Any nodes that clip into geometry when offset by {\ttfamily height} will not be considered for any edge connections.
\end{DoxyAttention}
\begin{DoxySeeAlso}{See also}
\mbox{\hyperlink{class_human_factors_1_1_visibility_graph_1_1_visibility_graph_a6b9e6d59435543aebc5a42beea7e916d}{Generate\+All\+To\+All}} to generate a graph from every node to every other node.
\end{DoxySeeAlso}
\begin{DoxyParagraph}{Example}

\end{DoxyParagraph}

\begin{DoxyCodeInclude}{0}
\DoxyCodeLine{            \textcolor{comment}{// Load the example plane and convert it to z-\/up}}
\DoxyCodeLine{            MeshInfo MI = (OBJLoader.LoadOBJ(\textcolor{stringliteral}{"ExampleModels/plane.obj"}, CommonRotations.Yup\_To\_Zup));}
\DoxyCodeLine{}
\DoxyCodeLine{            \textcolor{comment}{// Construct a BVH from this mesh}}
\DoxyCodeLine{            EmbreeBVH bvh = \textcolor{keyword}{new} EmbreeBVH(MI);}
\DoxyCodeLine{}
\DoxyCodeLine{            \textcolor{comment}{// Define all nodes and put them into an array,}}
\DoxyCodeLine{            Vector3D Point1 = \textcolor{keyword}{new} Vector3D(0, 0, 0);}
\DoxyCodeLine{            Vector3D Point2 = \textcolor{keyword}{new} Vector3D(0, 1, 0);}
\DoxyCodeLine{            Vector3D Point3 = \textcolor{keyword}{new} Vector3D(1, 0, 0);}
\DoxyCodeLine{            Vector3D Point4 = \textcolor{keyword}{new} Vector3D(1, 0, -\/4); \textcolor{comment}{// Node 4 is beneath the plane so it should have no connections}}
\DoxyCodeLine{            Vector3D[] nodes = \{ Point1, Point2, Point3, Point4 \};}
\end{DoxyCodeInclude}

\begin{DoxyCodeInclude}{0}
\DoxyCodeLine{}
\DoxyCodeLine{            \textcolor{comment}{// Define two groups of nodes}}
\DoxyCodeLine{            Vector3D[] group\_a = \{ Point1, Point2 \};}
\DoxyCodeLine{            Vector3D[] group\_b = \{ Point3, Point4 \};}
\DoxyCodeLine{}
\DoxyCodeLine{            \textcolor{comment}{// Generate a visibility graph from group A to group B}}
\DoxyCodeLine{            Graph G = \mbox{\hyperlink{namespace_human_factors}{HumanFactors}}.\mbox{\hyperlink{namespace_human_factors_1_1_visibility_graph}{VisibilityGraph}}.\mbox{\hyperlink{class_human_factors_1_1_visibility_graph_1_1_visibility_graph}{VisibilityGraph}}.\mbox{\hyperlink{class_human_factors_1_1_visibility_graph_1_1_visibility_graph_aebd2e16352a8e5a9920dffe809ed911d}{GenerateGroupToGroup}}(bvh, group\_a, group\_b);}
\DoxyCodeLine{}
\DoxyCodeLine{            \textcolor{comment}{// Print the results}}
\DoxyCodeLine{            var results = G.AggregateEdgeCosts(\mbox{\hyperlink{namespace_human_factors_1_1_spatial_structures_abd405fa41da0f9a771d547aa47b6e1a0}{GraphEdgeAggregation}}.SUM);}
\DoxyCodeLine{}
\DoxyCodeLine{            Debug.WriteLine(\textcolor{stringliteral}{"[\{0\}, \{1\}, \{2\}, \{3\}]"}, results[0], results[1], results[2], results[3]);}
\DoxyCodeLine{}
\end{DoxyCodeInclude}
 {\ttfamily 1, 1.\+414214, 0, 0}

Note how the nodes in group B have scores of 0. This is because edges are only calculated from group a to group B and by default Aggredgate\+Edge\+Costs only considers outgoing costs with it\textquotesingle{}s default parameters. Since group to group graphs only store the edges for a node in one of the two nodes, you should use {\ttfamily Graph.\+Aggregate\+Edge\+Costs(Graph\+Edge\+Aggregation.\+S\+UM, directed\+:false)} to get the accurate score for every node, since the edges of a visibility graph are bidirectional.


\begin{DoxyCodeInclude}{0}
\DoxyCodeLine{}
\DoxyCodeLine{            \textcolor{comment}{// Print the undirected results}}
\DoxyCodeLine{            results = G.AggregateEdgeCosts(\mbox{\hyperlink{namespace_human_factors_1_1_spatial_structures_abd405fa41da0f9a771d547aa47b6e1a0}{GraphEdgeAggregation}}.SUM, directed:\textcolor{keyword}{false});}
\DoxyCodeLine{}
\DoxyCodeLine{            Debug.WriteLine(\textcolor{stringliteral}{"[\{0\}, \{1\}, \{2\}, \{3\}]"}, results[0], results[1], results[2], results[3]);}
\DoxyCodeLine{}
\end{DoxyCodeInclude}
 {\ttfamily \mbox{[}1, 1.\+414214, 2.\+414214, 0\mbox{]}}

As you can see here, node 3 has a score of 0 since it doesn\textquotesingle{}t have a clear line of sight to either of the nodes in group a. Node 2 has a score equal to that of 0 and 1 combined since it has a clear line of sight to both of them. 

The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
src/\+Csharp/packages/visibilitygraph/src/Visibility\+Graph.\+cs\end{DoxyCompactItemize}
