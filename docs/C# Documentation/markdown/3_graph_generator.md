
# Using the Graph Generator

### Generating the Graph

#### Minimum Settings for Generating a Graph.
Now that we have the mesh, Generating the graph is relatively straightforward. Internally, the graph uses the EmbreeRayTracer which requires a BVH, so we can follow the process as the previous tutorial to create a BVH for it. For now, we will begin with minimum required settings, then work our way up to some other examples. To generate a graph at minimum, the following arguments are requried:

1) A BVH containing the mesh you want to use for graph generation.
2) A starting point.
3) The spacing nodes.

So let's start small and use the default settings for everything else. Add the following code below the MeshRotation from the previous section

```C#
         // Generate a BVH from the Plane Mesh
        EmbreeBVH bvh = new EmbreeBVH(PlaneMeshInfo);
        
        // Set Options for the Graph Generator
        HumanFactors.Vector3D start_point = new HumanFactors.Vector3D(0, 0, 0); // The point to start graph generation
        HumanFactors.Vector3D spacing = new HumanFactors.Vector3D(1, 1, 1); // The spacing between each node
        
        // Generate the Graph
        Graph G = GraphGenerator.GenerateGraph(bvh, start_point, spacing);
```

#### Checking the Output

Now just because the graph generator ran, it doesn't mean that a graph was successfully created. If the GraphGenerator could not generate any connections from the start point, or the start point was not over any solid ground, the graph will fail to generate and the Graph Generator will return a null value. Let's add a null check before trying to get the nodes.

``` C#
        // Check if the graph generator succeeded
        if (G is null) {
            Debug.Log("The Graph failed to generate.");
            return;
        }
```

Now if the graph fails to generate, instead of a null reference exception appearing later when we try to read the nodes, our own hand written log message will be printed and we'll exit the function as soon as possible.

#### Retrieving A list of nodes

If the code advanced past the null check, that means the graph generator was successful and we now have a graph of the space. To illustrate this, we will get a list of all nodes generated by the graph, then print them. 

``` C#
        // Get a list of nodes from the graph and print them.
        NodeList nodes = G.getNodes();
        Debug.Log(nodes);
```
